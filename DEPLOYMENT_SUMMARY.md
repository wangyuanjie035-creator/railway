# ğŸš€ Docker & Railway éƒ¨ç½²æ–¹æ¡ˆæ€»ç»“

## ğŸ“‹ é—®é¢˜èƒŒæ™¯

Vercel å¹³å°æœ‰ä»¥ä¸‹é™åˆ¶ï¼š
- âŒ æ–‡ä»¶æ•°é‡é™åˆ¶ï¼ˆå¯¼è‡´éƒ¨ç½²å¤±è´¥ï¼‰
- âŒ API å‡½æ•°æ•°é‡é™åˆ¶
- âŒ å•æ–‡ä»¶å¤§å°é™åˆ¶
- âŒ æ‰§è¡Œæ—¶é—´é™åˆ¶

## âœ… è§£å†³æ–¹æ¡ˆ

æˆ‘ä»¬æä¾›äº†ä¸¤ç§æ— é™åˆ¶çš„éƒ¨ç½²æ–¹æ¡ˆï¼š

### ğŸ³ Docker æ–¹æ¡ˆ
- âœ… æ— æ–‡ä»¶æ•°é‡é™åˆ¶
- âœ… å®Œå…¨æ§åˆ¶è¿è¡Œç¯å¢ƒ
- âœ… æ”¯æŒæ‰€æœ‰ Node.js åŠŸèƒ½
- âœ… å¯åœ¨ä»»ä½•å¹³å°éƒ¨ç½²

### ğŸš‚ Railway æ–¹æ¡ˆ
- âœ… æ— æ–‡ä»¶æ•°é‡é™åˆ¶
- âœ… ç®€å•çš„ Git é›†æˆ
- âœ… è‡ªåŠ¨éƒ¨ç½²
- âœ… å†…ç½®æ•°æ®åº“æ”¯æŒ
- âœ… å…è´¹é¢åº¦å……è¶³

## ğŸ“ æ–°å¢æ–‡ä»¶åˆ—è¡¨

### Docker ç›¸å…³æ–‡ä»¶
- `Dockerfile` - Docker é•œåƒæ„å»ºé…ç½®
- `docker-compose.yml` - Docker Compose é…ç½®ï¼ˆå¯é€‰ï¼‰
- `.dockerignore` - Docker æ„å»ºå¿½ç•¥æ–‡ä»¶

### Railway ç›¸å…³æ–‡ä»¶
- `railway.json` - Railway éƒ¨ç½²é…ç½®

### æœåŠ¡å™¨æ–‡ä»¶
- `server.js` - Express æœåŠ¡å™¨ä¸»æ–‡ä»¶
- `package.json` - Node.js é¡¹ç›®é…ç½®
- `api/index.js` - API è·¯ç”±å…¥å£
- `api/download-file-express.js` - Express ç‰ˆæœ¬çš„æ–‡ä»¶ä¸‹è½½ API

### é…ç½®æ–‡ä»¶
- `env.example` - ç¯å¢ƒå˜é‡ç¤ºä¾‹æ–‡ä»¶

### éƒ¨ç½²è„šæœ¬
- `deploy.sh` - Linux/Mac éƒ¨ç½²è„šæœ¬
- `deploy.bat` - Windows éƒ¨ç½²è„šæœ¬

### æ–‡æ¡£
- `DOCKER_RAILWAY_DEPLOYMENT_GUIDE.md` - è¯¦ç»†éƒ¨ç½²æŒ‡å—
- `DEPLOYMENT_SUMMARY.md` - æœ¬æ€»ç»“æ–‡æ¡£

## ğŸ”§ æŠ€æœ¯æ¶æ„å˜åŒ–

### ä» Vercel åˆ° Express çš„è½¬æ¢

| ç»„ä»¶ | Vercel ç‰ˆæœ¬ | Express ç‰ˆæœ¬ |
|-----|------------|-------------|
| **å…¥å£æ–‡ä»¶** | `api/function.js` | `server.js` |
| **è·¯ç”±å¤„ç†** | `export default handler` | `app.get/post()` |
| **CORS** | `setCorsHeaders()` | `app.use(cors())` |
| **é™æ€æ–‡ä»¶** | è‡ªåŠ¨å¤„ç† | `express.static()` |
| **ç¯å¢ƒå˜é‡** | `process.env` | `process.env` (ç›¸åŒ) |

### API å…¼å®¹æ€§

æ‰€æœ‰ç°æœ‰çš„ API ç«¯ç‚¹ä¿æŒä¸å˜ï¼š
- âœ… `/api/download-file`
- âœ… `/api/submit-quote-real`
- âœ… `/api/get-draft-orders`
- âœ… `/api/update-quote`
- âœ… `/api/send-invoice-email`
- âœ… ç­‰ç­‰...

## ğŸš€ å¿«é€Ÿéƒ¨ç½²æŒ‡å—

### æ–¹æ³•ä¸€ï¼šä½¿ç”¨éƒ¨ç½²è„šæœ¬ï¼ˆæ¨èï¼‰

**Windows:**
```cmd
deploy.bat docker
# æˆ–
deploy.bat railway
```

**Linux/Mac:**
```bash
./deploy.sh docker
# æˆ–
./deploy.sh railway
```

### æ–¹æ³•äºŒï¼šæ‰‹åŠ¨éƒ¨ç½²

**Docker éƒ¨ç½²:**
```bash
# 1. è®¾ç½®ç¯å¢ƒå˜é‡
cp env.example .env
# ç¼–è¾‘ .env æ–‡ä»¶

# 2. æ„å»ºå¹¶è¿è¡Œ
docker build -t shopify-3d-service .
docker run -d -p 3000:3000 --env-file .env shopify-3d-service
```

**Railway éƒ¨ç½²:**
```bash
# 1. å®‰è£… Railway CLI
npm install -g @railway/cli

# 2. ç™»å½•å¹¶éƒ¨ç½²
railway login
railway up
```

## ğŸ”§ ç¯å¢ƒå˜é‡é…ç½®

### å¿…éœ€å˜é‡
```bash
SHOPIFY_STORE_DOMAIN=your-store.myshopify.com
SHOPIFY_ACCESS_TOKEN=your_admin_access_token
NODE_ENV=production
PORT=3000
```

### å¯é€‰å˜é‡
```bash
API_BASE_URL=https://your-domain.com/api
ADMIN_PASSWORD=your_admin_password
```

## ğŸ“Š éƒ¨ç½²åé…ç½®

### 1. æ›´æ–°å‰ç«¯ API åœ°å€

åœ¨ `templates/page.admin-draft-orders.liquid` ä¸­ï¼š

```javascript
// ä¿®æ”¹è¿™è¡Œ
const API_BASE = 'https://your-new-domain.com/api';
```

### 2. æµ‹è¯•éƒ¨ç½²

è®¿é—®ä»¥ä¸‹ URL éªŒè¯éƒ¨ç½²ï¼š
- ä¸»é¡µï¼š`https://your-domain.com/`
- ç®¡ç†å‘˜é¡µé¢ï¼š`https://your-domain.com/pages/admin-draft-orders`
- API å¥åº·æ£€æŸ¥ï¼š`https://your-domain.com/api/health`

## ğŸ’° æˆæœ¬å¯¹æ¯”

| æ–¹æ¡ˆ | å…è´¹é¢åº¦ | ä»˜è´¹è®¡åˆ’ | æ¨èåœºæ™¯ |
|-----|---------|---------|----------|
| **Vercel** | æœ‰é™åˆ¶ | $20/æœˆèµ· | ç®€å•é¡¹ç›® |
| **Railway** | $5/æœˆé¢åº¦ | $5/æœˆèµ· | ä¸­å°å‹é¡¹ç›® âœ… |
| **Docker** | è‡ªæ‰˜ç®¡å…è´¹ | äº‘æœåŠ¡è´¹ç”¨ | å¤§å‹é¡¹ç›® |

## ğŸ¯ æ¨èæ–¹æ¡ˆ

### å¯¹äºæ‚¨çš„é¡¹ç›®
**æ¨èï¼šRailway éƒ¨ç½²**

**ç†ç”±ï¼š**
1. âœ… ç®€å•æ˜“ç”¨ï¼Œä¸€é”®éƒ¨ç½²
2. âœ… æ— æ–‡ä»¶æ•°é‡é™åˆ¶
3. âœ… å…è´¹é¢åº¦å……è¶³ï¼ˆ$5/æœˆï¼‰
4. âœ… è‡ªåŠ¨ Git é›†æˆ
5. âœ… å†…ç½®ç›‘æ§å’Œæ—¥å¿—

## ğŸ” æ•…éšœæ’é™¤

### å¸¸è§é—®é¢˜

1. **ç¯å¢ƒå˜é‡æœªè®¾ç½®**
   - æ£€æŸ¥ `.env` æ–‡ä»¶æ˜¯å¦å­˜åœ¨
   - éªŒè¯å˜é‡åç§°æ‹¼å†™

2. **ç«¯å£å†²çª**
   - æ›´æ”¹ `PORT` ç¯å¢ƒå˜é‡
   - æˆ–åœæ­¢å ç”¨ç«¯å£çš„æœåŠ¡

3. **æ–‡ä»¶ä¸‹è½½å¤±è´¥**
   - æ£€æŸ¥ Shopify è®¿é—®ä»¤ç‰Œæƒé™
   - æŸ¥çœ‹æœåŠ¡å™¨æ—¥å¿—

### è°ƒè¯•å‘½ä»¤

**Docker:**
```bash
docker logs -f shopify-3d-service
docker exec -it shopify-3d-service /bin/sh
```

**Railway:**
```bash
railway logs
railway status
```

## ğŸ“ˆ æ€§èƒ½ä¼˜åŠ¿

### ç›¸æ¯” Vercel çš„ä¼˜åŠ¿

1. **æ— é™åˆ¶éƒ¨ç½²**
   - âœ… æ— æ–‡ä»¶æ•°é‡é™åˆ¶
   - âœ… æ—  API å‡½æ•°æ•°é‡é™åˆ¶
   - âœ… æ— å•æ–‡ä»¶å¤§å°é™åˆ¶

2. **æ›´å¥½çš„æ€§èƒ½**
   - âœ… æ›´å¿«çš„å†·å¯åŠ¨
   - âœ… æ›´é•¿çš„æ‰§è¡Œæ—¶é—´
   - âœ… æ›´å¤§çš„å†…å­˜é™åˆ¶

3. **æ›´å¼ºçš„æ§åˆ¶**
   - âœ… å®Œå…¨æ§åˆ¶è¿è¡Œç¯å¢ƒ
   - âœ… æ”¯æŒæ‰€æœ‰ Node.js åŠŸèƒ½
   - âœ… è‡ªå®šä¹‰æœåŠ¡å™¨é…ç½®

## ğŸ‰ æ€»ç»“

é€šè¿‡ Docker å’Œ Railway éƒ¨ç½²æ–¹æ¡ˆï¼Œæˆ‘ä»¬æˆåŠŸè§£å†³äº† Vercel çš„æ–‡ä»¶æ•°é‡é™åˆ¶é—®é¢˜ï¼š

1. **âœ… è§£å†³äº†éƒ¨ç½²é™åˆ¶** - æ— æ–‡ä»¶æ•°é‡é™åˆ¶
2. **âœ… ä¿æŒäº†åŠŸèƒ½å®Œæ•´** - æ‰€æœ‰åŠŸèƒ½æ­£å¸¸å·¥ä½œ
3. **âœ… æä¾›äº†å¤šç§é€‰æ‹©** - Docker å’Œ Railway ä¸¤ç§æ–¹æ¡ˆ
4. **âœ… ç®€åŒ–äº†éƒ¨ç½²æµç¨‹** - ä¸€é”®éƒ¨ç½²è„šæœ¬
5. **âœ… é™ä½äº†æˆæœ¬** - Railway å…è´¹é¢åº¦å……è¶³

ç°åœ¨æ‚¨çš„ 3D æ‰“å°æœåŠ¡å¯ä»¥æ— é™åˆ¶åœ°éƒ¨ç½²å’Œè¿è¡Œäº†ï¼ğŸš€

---

**ä¸‹ä¸€æ­¥ï¼š**
1. é€‰æ‹©éƒ¨ç½²æ–¹æ¡ˆï¼ˆæ¨è Railwayï¼‰
2. é…ç½®ç¯å¢ƒå˜é‡
3. è¿è¡Œéƒ¨ç½²è„šæœ¬
4. æ›´æ–°å‰ç«¯ API åœ°å€
5. æµ‹è¯•æ‰€æœ‰åŠŸèƒ½

å¦‚æœ‰é—®é¢˜ï¼Œè¯·å‚è€ƒè¯¦ç»†éƒ¨ç½²æŒ‡å—æˆ–è”ç³»æŠ€æœ¯æ”¯æŒã€‚
