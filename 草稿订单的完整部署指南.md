# ğŸš€ Draft Order æ–¹æ¡ˆ - å®æ–½æŒ‡å—

## ğŸ“‹ å·²å®Œæˆçš„å·¥ä½œ

### âœ… åˆ›å»ºçš„æ–‡ä»¶

1. **api/submit-quote.js** - æäº¤è¯¢ä»· API
   - ä¸Šä¼ æ–‡ä»¶åˆ° Shopify Files
   - åˆ›å»º Draft Orderï¼ˆå ä½ä»·æ ¼ Â¥0.01ï¼‰
   - åˆ›å»º Metaobjectï¼ˆå­˜å‚¨å…³è”ä¿¡æ¯ï¼‰

2. **api/update-quote.js** - æ›´æ–°æŠ¥ä»· API
   - æ›´æ–° Draft Order ä»·æ ¼
   - æ›´æ–° customAttributesï¼ˆçŠ¶æ€ã€å¤‡æ³¨ï¼‰
   - åŒæ­¥æ›´æ–° Metaobject

3. **api/get-draft-order.js** - è·å– Draft Order API
   - é€šè¿‡åç§°æˆ– ID æŸ¥è¯¢
   - è¿”å›æ ¼å¼åŒ–çš„è¯¢ä»·è¯¦æƒ…

4. **templates/page.my-quotes.liquid** - å®¢æˆ·æŸ¥çœ‹è¯¢ä»·é¡µé¢
   - æ˜¾ç¤ºè¯¢ä»·çŠ¶æ€
   - å·²æŠ¥ä»·æ—¶æ˜¾ç¤º"ç«‹å³ä¸‹å•"æŒ‰é’®
   - ç‚¹å‡»è·³è½¬åˆ° Shopify ç»“è´¦é¡µé¢

5. **templates/page.quote-request.liquid** - ç®€åŒ–çš„è¯¢ä»·æäº¤é¡µé¢
   - æ–‡ä»¶ä¸Šä¼ ï¼ˆæ‹–æ‹½/ç‚¹å‡»ï¼‰
   - å¡«å†™å®šåˆ¶å‚æ•°
   - æäº¤è¯¢ä»·

---

## ğŸ”§ éœ€è¦çš„é…ç½®

### 1. Shopify API æƒé™ï¼ˆå·²æ·»åŠ  âœ…ï¼‰

ä½ å·²ç»æ·»åŠ äº†ä»¥ä¸‹æƒé™ï¼š
- âœ… `write_draft_orders` - åˆ›å»ºå’Œæ›´æ–°è‰ç¨¿è®¢å•
- âœ… `read_draft_orders` - è¯»å–è‰ç¨¿è®¢å•
- âœ… `write_files` - ä¸Šä¼ æ–‡ä»¶
- âœ… `read_files` - è¯»å–æ–‡ä»¶

### 2. Vercel ç¯å¢ƒå˜é‡

ç¡®è®¤ä»¥ä¸‹ç¯å¢ƒå˜é‡å·²é…ç½®ï¼š
```bash
SHOPIFY_STORE_DOMAIN=your-store.myshopify.com
SHOPIFY_ACCESS_TOKEN=shpat_xxxxxxxxxxxxxxxx
```

### 3. API åŸºç¡€ URL

åœ¨ä»¥ä¸‹æ–‡ä»¶ä¸­ï¼Œå°† `API_BASE` ä¿®æ”¹ä¸ºä½ çš„ Vercel åŸŸåï¼š
- `templates/page.my-quotes.liquid` (ç¬¬ 245 è¡Œ)
- `templates/page.quote-request.liquid` (ç¬¬ 348 è¡Œ)

```javascript
const API_BASE = 'https://shopify-13s4.vercel.app/api';  // â† ä¿®æ”¹è¿™é‡Œ
```

---

## ğŸ“ æ–‡ä»¶éƒ¨ç½²æ¸…å•

### Vercel éƒ¨ç½²

ä¸Šä¼ ä»¥ä¸‹æ–‡ä»¶åˆ° Vercelï¼š

```
api/
  â”œâ”€â”€ submit-quote.js       âœ… æ–°å»º
  â”œâ”€â”€ update-quote.js       âœ… æ–°å»º
  â”œâ”€â”€ get-draft-order.js    âœ… æ–°å»º
  â”œâ”€â”€ upload-file.js        âš ï¸ ä¿ç•™ï¼ˆå¯èƒ½è¿˜éœ€è¦ï¼‰
  â”œâ”€â”€ quotes-restored.js    âš ï¸ ä¿ç•™ï¼ˆæ—§ç‰ˆæœ¬ï¼Œæš‚ä¸åˆ é™¤ï¼‰
  â”œâ”€â”€ send-email.js         âœ… ä¿ç•™ï¼ˆä»éœ€è¦ï¼‰
  â”œâ”€â”€ download-file.js      âœ… ä¿ç•™ï¼ˆä»éœ€è¦ï¼‰
  â””â”€â”€ cleanup-files.js      âœ… ä¿ç•™ï¼ˆä»éœ€è¦ï¼‰
```

### Shopify ä¸»é¢˜ä¸Šä¼ 

ä¸Šä¼ ä»¥ä¸‹æ–‡ä»¶åˆ° Shopify ä¸»é¢˜ï¼š

```
templates/
  â”œâ”€â”€ page.quote-request.liquid    âœ… æ–°å»º
  â”œâ”€â”€ page.my-quotes.liquid        âœ… æ–°å»º
  â”œâ”€â”€ page.admin-dashboard.liquid  âš ï¸ éœ€è¦ä¿®æ”¹ï¼ˆè§ä¸‹æ–‡ï¼‰
  â””â”€â”€ cart.quote.liquid            âš ï¸ æ—§ç‰ˆæœ¬ï¼ˆå¯ä»¥åˆ é™¤ï¼‰

assets/
  â””â”€â”€ model-uploader.js            âš ï¸ æ—§ç‰ˆæœ¬ï¼ˆæš‚ä¸åˆ é™¤ï¼Œå¤‡ç”¨ï¼‰
```

---

## ğŸ”„ å®Œæ•´å·¥ä½œæµç¨‹

### å®¢æˆ·ç«¯æµç¨‹

```
æ­¥éª¤ 1: æäº¤è¯¢ä»·
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
è®¿é—®: /pages/quote-request

å®¢æˆ·æ“ä½œ:
1. ä¸Šä¼  3D æ¨¡å‹æ–‡ä»¶
2. å¡«å†™å‚æ•°ï¼ˆæ•°é‡ã€æè´¨ã€é¢œè‰²ï¼‰
3. å¡«å†™è”ç³»ä¿¡æ¯ï¼ˆå§“åã€é‚®ç®±ï¼‰
4. ç‚¹å‡»"æäº¤è¯¢ä»·"

ç³»ç»Ÿæ“ä½œ:
5. è°ƒç”¨ POST /api/submit-quote
6. ä¸Šä¼ æ–‡ä»¶ + åˆ›å»º Draft Order
7. è¿”å›è¯¢ä»·å•å· (å¦‚ #D1001)
8. è·³è½¬åˆ° /pages/my-quotes?id=D1001


æ­¥éª¤ 2: æŸ¥çœ‹è¯¢ä»·çŠ¶æ€
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
è®¿é—®: /pages/my-quotes?id=D1001

ç³»ç»Ÿæ“ä½œ:
1. è°ƒç”¨ GET /api/get-draft-order?id=D1001
2. è·å– Draft Order è¯¦æƒ…
3. æ˜¾ç¤ºçŠ¶æ€ï¼ˆå¾…æŠ¥ä»·/å·²æŠ¥ä»·ï¼‰

å¾…æŠ¥ä»·æ—¶æ˜¾ç¤º:
- ğŸŸ¡ å¾…æŠ¥ä»·
- "å®¢æœæ­£åœ¨ä¸ºæ‚¨æŠ¥ä»·ï¼Œè¯·ç¨å€™..."
- [åˆ·æ–°çŠ¶æ€] æŒ‰é’®

å·²æŠ¥ä»·æ—¶æ˜¾ç¤º:
- ğŸŸ¢ å·²æŠ¥ä»·
- æŠ¥ä»·é‡‘é¢: Â¥1,500
- å®¢æœå¤‡æ³¨
- [ğŸ›’ ç«‹å³ä¸‹å•] æŒ‰é’®


æ­¥éª¤ 3: ç¡®è®¤ä¸‹å•
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
å®¢æˆ·æ“ä½œ:
1. ç‚¹å‡»"ç«‹å³ä¸‹å•"

ç³»ç»Ÿæ“ä½œ:
2. è·³è½¬åˆ° Draft Order çš„ invoiceUrl
   (https://checkout.shopify.com/...)
3. å®¢æˆ·åœ¨ Shopify ç»“è´¦é¡µé¢çœ‹åˆ°:
   - äº§å“: å®šåˆ¶äº§å“ - model.step
   - å•ä»·: Â¥1,500.00
   - æ•°é‡: 1
   - æ€»è®¡: Â¥1,500.00
4. å®¢æˆ·å®Œæˆæ”¯ä»˜
5. Draft Order è‡ªåŠ¨è½¬ä¸ºæ­£å¼è®¢å•
6. è®¢å•çŠ¶æ€: å¾…å‘è´§
```

---

### ç®¡ç†ç«¯æµç¨‹

```
æ­¥éª¤ 1: æŸ¥çœ‹å¾…æŠ¥ä»·è®¢å•
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
è®¿é—®: /pages/admin-dashboard

æ˜¾ç¤ºå†…å®¹:
- æ‰€æœ‰ Draft Orderï¼ˆçŠ¶æ€: openï¼‰
- ç­›é€‰å‡º tags åŒ…å« "pending" çš„è®¢å•
- æ˜¾ç¤ºå®¢æˆ·ä¿¡æ¯ã€æ–‡ä»¶åã€æäº¤æ—¶é—´


æ­¥éª¤ 2: æ·»åŠ æŠ¥ä»·
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
å®¢æœæ“ä½œ:
1. ç‚¹å‡»"æ·»åŠ æŠ¥ä»·"
2. è¾“å…¥æŠ¥ä»·é‡‘é¢ (å¦‚ 1500)
3. è¾“å…¥å¤‡æ³¨ (å¦‚"æ ¹æ®æ‚¨çš„è¦æ±‚...")
4. è¾“å…¥å‘é€é‚®ç®± (å®¢æœè‡ªå·±çš„é‚®ç®±)
5. ç‚¹å‡»"å‘é€æŠ¥ä»·"

ç³»ç»Ÿæ“ä½œ:
6. è°ƒç”¨ POST /api/update-quote
   {
     "draftOrderId": "gid://shopify/DraftOrder/...",
     "amount": 1500,
     "note": "æ ¹æ®æ‚¨çš„è¦æ±‚...",
     "senderEmail": "service@company.com"
   }
7. æ›´æ–° Draft Order:
   - lineItems[0].originalUnitPrice = 1500
   - customAttributes["çŠ¶æ€"] = "å·²æŠ¥ä»·"
   - customAttributes["æŠ¥ä»·é‡‘é¢"] = "Â¥1500"
   - customAttributes["å¤‡æ³¨"] = "..."
8. åŒæ­¥æ›´æ–° Metaobject:
   - status = "Quoted"
   - amount = 1500
9. è°ƒç”¨ POST /api/send-email
10. å‘é€é‚®ä»¶é€šçŸ¥å®¢æˆ·
```

---

## ğŸ› ï¸ ç®¡ç†åå°ä¿®æ”¹æŒ‡å—

ç”±äºç°æœ‰çš„ `page.admin-dashboard.liquid` éå¸¸å¤æ‚ï¼Œæœ‰ä¸¤ä¸ªé€‰æ‹©ï¼š

### é€‰é¡¹ A: åˆ›å»ºæ–°çš„ç®¡ç†é¡µé¢ï¼ˆæ¨èï¼‰â­

åˆ›å»º `templates/page.admin-draft-orders.liquid`ï¼š

```liquid
<!-- æ–°çš„ Draft Order ç®¡ç†é¡µé¢ -->
<div id="admin-container">
  <h1>ğŸ“‹ Draft Order ç®¡ç†</h1>
  
  <div id="draft-orders-list">
    <!-- åˆ—è¡¨å°†é€šè¿‡ JavaScript æ¸²æŸ“ -->
  </div>
</div>

<script>
  const API_BASE = 'https://shopify-13s4.vercel.app/api';
  
  // åŠ è½½ Draft Orders
  async function loadDraftOrders() {
    // é€šè¿‡ Shopify GraphQL API æŸ¥è¯¢æ‰€æœ‰ open çŠ¶æ€çš„ Draft Orders
    // ç­›é€‰å‡º tags åŒ…å« "pending" æˆ– "quote" çš„è®¢å•
    // æ¸²æŸ“åˆ—è¡¨
  }
  
  // æ‰“å¼€æŠ¥ä»·å¯¹è¯æ¡†
  function openQuoteDialog(draftOrder) {
    // æ˜¾ç¤ºæ¨¡æ€æ¡†
    // è¾“å…¥æŠ¥ä»·é‡‘é¢ã€å¤‡æ³¨ã€å®¢æœé‚®ç®±
  }
  
  // æäº¤æŠ¥ä»·
  async function submitQuote(draftOrderId, amount, note, senderEmail) {
    const response = await fetch(`${API_BASE}/update-quote`, {
      method: 'POST',
      headers: { 'Content-Type': 'application/json' },
      body: JSON.stringify({
        draftOrderId,
        amount,
        note,
        senderEmail
      })
    });
    
    if (response.ok) {
      const result = await response.json();
      
      // å‘é€é‚®ä»¶
      await sendEmail(result);
      
      // åˆ·æ–°åˆ—è¡¨
      loadDraftOrders();
    }
  }
  
  // å‘é€é‚®ä»¶
  async function sendEmail(result) {
    // è°ƒç”¨ send-email API
    // æ˜¾ç¤ºé‚®ä»¶å¯¹è¯æ¡†
  }
</script>
```

---

### é€‰é¡¹ B: ä¿®æ”¹ç°æœ‰ç®¡ç†é¡µé¢

åœ¨ `page.admin-dashboard.liquid` ä¸­ä¿®æ”¹ `sendQuoteEmail` å‡½æ•°ï¼š

**æ‰¾åˆ°è¿™ä¸ªå‡½æ•°** (å¤§çº¦åœ¨ç¬¬ 1368 è¡Œ):

```javascript
async function sendQuoteEmail(orderId, customerEmail, senderEmail, files, amount, note) {
  // ... ç°æœ‰ä»£ç 
}
```

**åœ¨å®ƒä¹‹å‰æ·»åŠ æ–°å‡½æ•°**:

```javascript
// æ–°å¢ï¼šæ›´æ–° Draft Order æŠ¥ä»·
async function updateDraftOrderQuote(draftOrderId, amount, note, senderEmail) {
  try {
    const response = await fetch(`${QUOTES_API_BASE}/update-quote`, {
      method: 'POST',
      headers: {
        'Content-Type': 'application/json'
      },
      body: JSON.stringify({
        draftOrderId,
        amount: parseFloat(amount),
        note,
        senderEmail
      })
    });
    
    if (!response.ok) {
      throw new Error('æ›´æ–°æŠ¥ä»·å¤±è´¥');
    }
    
    const result = await response.json();
    console.log('âœ… Draft Order æ›´æ–°æˆåŠŸ:', result);
    
    return result;
  } catch (error) {
    console.error('âŒ æ›´æ–°æŠ¥ä»·å¤±è´¥:', error);
    throw error;
  }
}
```

**ä¿®æ”¹æäº¤æŠ¥ä»·çš„é€»è¾‘**:

æ‰¾åˆ° `submitQuote` æˆ–ç±»ä¼¼çš„æäº¤å‡½æ•°ï¼Œåœ¨æ›´æ–° Metaobject ä¹‹åï¼Œæ·»åŠ ï¼š

```javascript
// å¦‚æœè®¢å•æœ‰ draft_order_idï¼Œåˆ™æ›´æ–° Draft Order
if (order.properties.fields.draft_order_id) {
  try {
    await updateDraftOrderQuote(
      order.properties.fields.draft_order_id,
      amount,
      note,
      senderEmail
    );
    console.log('âœ… Draft Order ä»·æ ¼å·²æ›´æ–°');
  } catch (error) {
    console.warn('âš ï¸ Draft Order æ›´æ–°å¤±è´¥ï¼ˆéè‡´å‘½é”™è¯¯ï¼‰:', error);
  }
}
```

---

## ğŸ§ª æµ‹è¯•æ¸…å•

### 1. API æµ‹è¯•

#### æµ‹è¯• submit-quote

```bash
curl -X POST https://shopify-13s4.vercel.app/api/submit-quote \
  -H "Content-Type: application/json" \
  -d '{
    "fileName": "test.step",
    "fileData": "data:application/octet-stream;base64,VEVTVCBGSUxF",
    "customerEmail": "test@example.com",
    "customerName": "æµ‹è¯•ç”¨æˆ·",
    "quantity": 100,
    "material": "ABS",
    "color": "ç™½è‰²"
  }'
```

**é¢„æœŸå“åº”**:
```json
{
  "success": true,
  "quoteId": "#D1001",
  "draftOrderId": "gid://shopify/DraftOrder/...",
  "invoiceUrl": "https://checkout.shopify.com/...",
  "message": "è¯¢ä»·æäº¤æˆåŠŸï¼"
}
```

#### æµ‹è¯• get-draft-order

```bash
curl "https://shopify-13s4.vercel.app/api/get-draft-order?id=%23D1001"
```

**é¢„æœŸå“åº”**:
```json
{
  "success": true,
  "draftOrder": {
    "name": "#D1001",
    "status": "å¾…æŠ¥ä»·",
    "totalPrice": "0.01",
    ...
  }
}
```

#### æµ‹è¯• update-quote

```bash
curl -X POST https://shopify-13s4.vercel.app/api/update-quote \
  -H "Content-Type: application/json" \
  -d '{
    "draftOrderId": "gid://shopify/DraftOrder/...",
    "amount": 1500,
    "note": "æµ‹è¯•æŠ¥ä»·"
  }'
```

**é¢„æœŸå“åº”**:
```json
{
  "success": true,
  "draftOrderName": "#D1001",
  "totalPrice": "1500.00",
  "message": "æŠ¥ä»·æ›´æ–°æˆåŠŸ"
}
```

---

### 2. å‰ç«¯æµ‹è¯•

#### æµ‹è¯•å®¢æˆ·æäº¤è¯¢ä»·

1. è®¿é—®: `https://your-store.myshopify.com/pages/quote-request`
2. ä¸Šä¼ æ–‡ä»¶ï¼ˆå¦‚ `test.step`ï¼‰
3. å¡«å†™å‚æ•°
4. ç‚¹å‡»"æäº¤è¯¢ä»·"
5. éªŒè¯:
   - âœ… æç¤º"è¯¢ä»·æäº¤æˆåŠŸ"
   - âœ… æ˜¾ç¤ºè¯¢ä»·å•å· (å¦‚ #D1001)
   - âœ… è·³è½¬åˆ° `/pages/my-quotes?id=D1001`

#### æµ‹è¯•å®¢æˆ·æŸ¥çœ‹è¯¢ä»·

1. è®¿é—®: `https://your-store.myshopify.com/pages/my-quotes?id=D1001`
2. éªŒè¯:
   - âœ… æ˜¾ç¤ºè¯¢ä»·å•å·
   - âœ… æ˜¾ç¤ºçŠ¶æ€ "ğŸŸ¡ å¾…æŠ¥ä»·"
   - âœ… æ˜¾ç¤ºæ–‡ä»¶åã€å‚æ•°
   - âœ… æ˜¾ç¤º"åˆ·æ–°çŠ¶æ€"æŒ‰é’®

#### æµ‹è¯•å®¢æœæ·»åŠ æŠ¥ä»·

1. åœ¨ Shopify åå°æˆ–é€šè¿‡ API æ›´æ–°æŠ¥ä»·
2. åˆ·æ–°å®¢æˆ·é¡µé¢
3. éªŒè¯:
   - âœ… çŠ¶æ€å˜ä¸º "ğŸŸ¢ å·²æŠ¥ä»·"
   - âœ… æ˜¾ç¤ºæŠ¥ä»·é‡‘é¢
   - âœ… æ˜¾ç¤º"ç«‹å³ä¸‹å•"æŒ‰é’®

#### æµ‹è¯•å®¢æˆ·ä¸‹å•

1. ç‚¹å‡»"ç«‹å³ä¸‹å•"
2. éªŒè¯:
   - âœ… è·³è½¬åˆ° Shopify ç»“è´¦é¡µé¢
   - âœ… æ˜¾ç¤ºæ­£ç¡®çš„äº§å“å’Œä»·æ ¼
   - âœ… å®Œæˆæ”¯ä»˜åè®¢å•åˆ›å»ºæˆåŠŸ

---

### 3. åå°éªŒè¯

#### åœ¨ Shopify åå°æŸ¥çœ‹

1. **Draft Orders**:
   - è®¢å• â†’ è‰ç¨¿è®¢å•
   - éªŒè¯:
     - âœ… å¯ä»¥çœ‹åˆ°æ–°åˆ›å»ºçš„è‰ç¨¿è®¢å•
     - âœ… è®¢å•å·æ ¼å¼ä¸º #D1001
     - âœ… çŠ¶æ€ä¸º "Open"
     - âœ… Tags åŒ…å« "quote", "pending"

2. **Files**:
   - å†…å®¹ â†’ æ–‡ä»¶
   - éªŒè¯:
     - âœ… å¯ä»¥çœ‹åˆ°ä¸Šä¼ çš„æ–‡ä»¶
     - âœ… æ–‡ä»¶å¯ä»¥ä¸‹è½½

3. **Metaobjects** (å¯é€‰):
   - è®¾ç½® â†’ è‡ªå®šä¹‰æ•°æ® â†’ Metaobjects
   - éªŒè¯:
     - âœ… å¯ä»¥çœ‹åˆ° quote ç±»å‹çš„ Metaobject
     - âœ… å­—æ®µåŒ…å« draft_order_id, status, amount ç­‰

---

## ğŸ› å¸¸è§é—®é¢˜

### Q1: API è¿”å› 401 é”™è¯¯

**åŸå› **: Shopify API ä»¤ç‰Œæ— æ•ˆæˆ–æƒé™ä¸è¶³

**è§£å†³æ–¹æ¡ˆ**:
1. æ£€æŸ¥ Vercel ç¯å¢ƒå˜é‡
2. ç¡®è®¤ `SHOPIFY_ACCESS_TOKEN` æ­£ç¡®
3. ç¡®è®¤å·²æ·»åŠ  `write_draft_orders` æƒé™

---

### Q2: Draft Order åˆ›å»ºæˆåŠŸä½†ä»·æ ¼æ˜¯ Â¥0.01

**åŸå› **: è¿™æ˜¯æ­£å¸¸çš„ï¼Œå ä½ä»·æ ¼

**è§£å†³æ–¹æ¡ˆ**:
- å®¢æœæ·»åŠ æŠ¥ä»·åï¼Œä»·æ ¼ä¼šæ›´æ–°ä¸ºå®é™…æŠ¥ä»·
- å®¢æˆ·ä¸‹å•æ—¶çœ‹åˆ°çš„æ˜¯æ›´æ–°åçš„ä»·æ ¼

---

### Q3: æ–‡ä»¶ä¸Šä¼ å¤±è´¥

**åŸå› **: æ–‡ä»¶è¿‡å¤§æˆ–æ ¼å¼ä¸æ”¯æŒ

**è§£å†³æ–¹æ¡ˆ**:
1. é™åˆ¶æ–‡ä»¶å¤§å° (å»ºè®® < 100MB)
2. éªŒè¯æ–‡ä»¶æ ¼å¼
3. æ£€æŸ¥ Vercel å‡½æ•°è¶…æ—¶è®¾ç½®ï¼ˆé»˜è®¤ 10 ç§’ï¼‰

---

### Q4: å®¢æˆ·ç‚¹å‡»"ç«‹å³ä¸‹å•"åçœ‹ä¸åˆ°æ­£ç¡®çš„ä»·æ ¼

**åŸå› **: Draft Order æ²¡æœ‰æ­£ç¡®æ›´æ–°

**è§£å†³æ–¹æ¡ˆ**:
1. æ£€æŸ¥ `update-quote` API æ—¥å¿—
2. ç¡®è®¤ `originalUnitPrice` å·²æ›´æ–°
3. å°è¯•åœ¨ Shopify åå°æ‰‹åŠ¨æŸ¥çœ‹ Draft Order

---

### Q5: é‚®ä»¶æ²¡æœ‰å‘é€

**åŸå› **: `send-email` API ä½¿ç”¨ `mailto:` åè®®

**è¯´æ˜**:
- `mailto:` åªæ˜¯æ‰“å¼€é‚®ä»¶å®¢æˆ·ç«¯
- å®¢æœéœ€è¦æ‰‹åŠ¨ç‚¹å‡»"å‘é€"
- æˆ–è€…ä½¿ç”¨"å¤åˆ¶é‚®ä»¶å†…å®¹"åŠŸèƒ½

**å‡çº§æ–¹æ¡ˆ**:
- ä½¿ç”¨ Resend/SendGrid å®ç°çœŸæ­£çš„è‡ªåŠ¨å‘é€
- å‚è€ƒ `EMAIL_SOLUTIONS_COMPARISON.md`

---

## ğŸ“š ç›¸å…³æ–‡æ¡£

- [FINAL_DRAFT_ORDER_SOLUTION.md](./FINAL_DRAFT_ORDER_SOLUTION.md) - å®Œæ•´æ–¹æ¡ˆè¯´æ˜
- [NEW_QUOTE_WORKFLOW.md](./NEW_QUOTE_WORKFLOW.md) - å·¥ä½œæµç¨‹è¯¦è§£
- [DRAFT_ORDER_CLARIFICATION.md](./DRAFT_ORDER_CLARIFICATION.md) - Draft Order æ¾„æ¸…
- [EMAIL_SOLUTIONS_COMPARISON.md](./EMAIL_SOLUTIONS_COMPARISON.md) - é‚®ä»¶æ–¹æ¡ˆå¯¹æ¯”

---

## ğŸ¯ ä¸‹ä¸€æ­¥

1. **éƒ¨ç½²åˆ° Vercel**:
   ```bash
   # æäº¤ä»£ç 
   git add .
   git commit -m "feat: å®æ–½ Draft Order æŠ¥ä»·æ–¹æ¡ˆ"
   git push
   
   # Vercel è‡ªåŠ¨éƒ¨ç½²
   ```

2. **ä¸Šä¼ åˆ° Shopify ä¸»é¢˜**:
   - ä½¿ç”¨ Shopify CLI æˆ–ä¸»é¢˜ç¼–è¾‘å™¨
   - ä¸Šä¼  `page.quote-request.liquid`
   - ä¸Šä¼  `page.my-quotes.liquid`

3. **åˆ›å»º Shopify é¡µé¢**:
   - åœ¨çº¿å•†åº— â†’ é¡µé¢ â†’ æ·»åŠ é¡µé¢
   - æ ‡é¢˜: "è¯¢ä»·è¯·æ±‚"
   - æ¨¡æ¿: `page.quote-request`
   - URL: `/pages/quote-request`
   
   - æ ‡é¢˜: "æˆ‘çš„è¯¢ä»·"
   - æ¨¡æ¿: `page.my-quotes`
   - URL: `/pages/my-quotes`

4. **æµ‹è¯•å®Œæ•´æµç¨‹**:
   - æŒ‰ç…§ä¸Šé¢çš„æµ‹è¯•æ¸…å•é€é¡¹æµ‹è¯•
   - è®°å½•ä»»ä½•é—®é¢˜

5. **æŠ•å…¥ä½¿ç”¨**:
   - åŸ¹è®­å®¢æœä½¿ç”¨æ–°ç³»ç»Ÿ
   - ç›‘æ§è®¢å•æµç¨‹
   - æ”¶é›†ç”¨æˆ·åé¦ˆ

---

**å®æ–½å®Œæˆï¼** ğŸ‰

å¦‚æœ‰ä»»ä½•é—®é¢˜ï¼Œè¯·æŸ¥çœ‹ç›¸å…³æ–‡æ¡£æˆ–è”ç³»æ”¯æŒã€‚

